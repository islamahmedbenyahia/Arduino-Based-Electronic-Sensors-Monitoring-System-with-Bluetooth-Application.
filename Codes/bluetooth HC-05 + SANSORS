// Inclure la bibliothèque SoftwareSerial pour utiliser le port série logiciel
#include <SoftwareSerial.h>

// Définir les broches pour le module Bluetooth HC-05
#define BT_TX 8
#define BT_RX 9

// Définir les broches pour les capteurs
#define MOUVEMENT_PIN 11
#define FLAMME_PIN 5
#define FLAMME_ANALOG A1
#define LUMIERE_PIN 4
#define SON_PIN 7
#define GAZ_PIN 6
#define GAZ_ANALOG A0
#define GSM_TX 3
#define GSM_RX 2

// Déclarer une variable pour stocker le code reçu
int code = 0;

// Créer un objet SoftwareSerial pour communiquer avec le module Bluetooth HC-05
SoftwareSerial BTSerial(BT_TX, BT_RX);

void setup() {
  // Initialiser la communication série avec le moniteur série
  Serial.begin(9600);

  // Initialiser la communication série avec le module Bluetooth HC-05
  BTSerial.begin(9600);

  // Initialiser les broches comme sorties ou entrées selon le cas
  pinMode(MOUVEMENT_PIN, OUTPUT);
  pinMode(FLAMME_PIN, OUTPUT);
  pinMode(LUMIERE_PIN, OUTPUT);
  pinMode(SON_PIN, OUTPUT);
  pinMode(GAZ_PIN, OUTPUT);
}

void loop() {
  // Vérifier si des données sont disponibles sur le port série logiciel
  if (BTSerial.available() > 0) {
    // Lire le code envoyé par l'application
    code = BTSerial.read();

    // Effectuer l'action correspondante selon le code
    switch (code) {
      case '1':
        // Allumer le capteur de son
        digitalWrite(SON_PIN, HIGH);
        break;
      case '2':
        // Éteindre le capteur de son
        digitalWrite(SON_PIN, LOW);
        break;
      case '3':
        // Allumer le capteur de mouvement
        digitalWrite(MOUVEMENT_PIN, HIGH);
        break;
      case '4':
        // Éteindre le capteur de mouvement
        digitalWrite(MOUVEMENT_PIN, LOW);
        break;
      case '5':
        // Allumer le capteur de GSM
        digitalWrite(GSM_TX, HIGH);
        digitalWrite(GSM_RX, HIGH);
        break;
      case '6':
        // Éteindre le capteur de GSM
        digitalWrite(GSM_TX, LOW);
        digitalWrite(GSM_RX, LOW);
        break;
      case '7':
        // Allumer le capteur de lumière
        digitalWrite(LUMIERE_PIN, HIGH);
        break;
      case '8':
        // Éteindre le capteur de lumière
        digitalWrite(LUMIERE_PIN, LOW);
        break;
      default:
        // Code invalide ou non reconnu
        break;
    }
  }
}

